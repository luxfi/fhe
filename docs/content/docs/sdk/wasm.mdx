---
title: WebAssembly
description: WASM module for browser and edge environments
---

# WebAssembly SDK

The WASM module enables FHE in browsers and edge environments without native dependencies.

## Overview

The WASM module is compiled from Go and provides the same functionality as the native SDK:

- Key generation
- Public/secret key encryption
- Homomorphic operations (add, sub, eq, lt)
- All operations run client-side

## Files

| File | Size | Purpose |
|------|------|---------|
| `luxfhe.wasm` | ~12 MB | Main WASM binary |
| `wasm_exec.js` | ~17 KB | Go runtime for WASM |

## Direct Usage

```html
<!DOCTYPE html>
<html>
<head>
  <script src="wasm_exec.js"></script>
  <script>
    const go = new Go();
    WebAssembly.instantiateStreaming(fetch('luxfhe.wasm'), go.importObject)
      .then(result => {
        go.run(result.instance);
        
        // luxfhe is now available globally
        console.log('Version:', luxfhe.version());
        
        const keys = luxfhe.generateKeys();
        console.log('Keys generated!');
        
        const ct = luxfhe.encrypt(42, 32, keys.publicKey);
        const result = luxfhe.decrypt(ct, keys.secretKey);
        console.log('Decrypted:', result);
      });
  </script>
</head>
<body>
  <div id="output"></div>
</body>
</html>
```

## Global API

Once loaded, `luxfhe` is available globally with these methods:

```javascript
// Version
luxfhe.version()  // Returns "1.0.0"

// Key generation
luxfhe.generateKeys()
// Returns: { secretKey, publicKey, bootstrapKey }

// Encryption
luxfhe.encrypt(value, bitWidth, publicKey)
// Returns: base64 ciphertext

// Decryption
luxfhe.decrypt(ciphertext, secretKey)
// Returns: number

// Arithmetic
luxfhe.add(ct1, ct2, bootstrapKey, secretKey)
luxfhe.sub(ct1, ct2, bootstrapKey, secretKey)

// Comparisons
luxfhe.eq(ct1, ct2, bootstrapKey, secretKey)
luxfhe.lt(ct1, ct2, bootstrapKey, secretKey)
```

## TypeScript Wrapper

For a better developer experience, use the TypeScript SDK which wraps the WASM module:

```typescript
import { LuxFHE } from '@luxfi/tfhe';

const fhe = await LuxFHE.init();
const keys = fhe.generateKeys();
```

See [TypeScript SDK](/docs/sdk/typescript) for full documentation.

## Bit Widths

Supported encryption bit widths:

| Bits | Range | Use Case |
|------|-------|----------|
| 4 | 0-15 | Small enums |
| 8 | 0-255 | Bytes, flags |
| 16 | 0-65535 | Small integers |
| 32 | 0-4B | General purpose |
| 64 | 0-2^64 | Large values |
| 128 | 0-2^128 | Cryptographic |
| 160 | 0-2^160 | Ethereum addresses |
| 256 | 0-2^256 | Hashes, big integers |

## Error Handling

WASM functions return error strings prefixed with "error:":

```javascript
const result = luxfhe.encrypt(value, bitWidth, invalidKey);
if (result.startsWith('error:')) {
  console.error('Encryption failed:', result);
}
```

## Performance

WASM performance is approximately 2-3x slower than native. For compute-intensive workloads, consider:

1. **Web Workers** for parallel operations
2. **Native SDK** for server-side processing
3. **Batching** multiple operations together

## Memory Considerations

- Initial load: ~50MB memory
- Per ciphertext: ~1KB
- Bootstrap key: ~50MB (loaded once)

Tips:
- Load WASM lazily
- Reuse key objects
- Clear ciphertexts when done

## Browser Compatibility

Requires WebAssembly support:

| Browser | Version |
|---------|---------|
| Chrome | 57+ |
| Firefox | 52+ |
| Safari | 11+ |
| Edge | 16+ |

## Building from Source

```bash
cd tfhe/wasm
GOOS=js GOARCH=wasm go build -o luxfhe.wasm main.go
```

Copy Go WASM runtime:

```bash
cp "$(go env GOROOT)/lib/wasm/wasm_exec.js" .
```

## Deployment

### CDN

```html
<script src="https://cdn.lux.network/tfhe/wasm_exec.js"></script>
<script>
  const go = new Go();
  WebAssembly.instantiateStreaming(
    fetch('https://cdn.lux.network/tfhe/luxfhe.wasm'),
    go.importObject
  ).then(result => go.run(result.instance));
</script>
```

### Self-Hosted

1. Copy `luxfhe.wasm` and `wasm_exec.js` to your static files
2. Ensure proper MIME type for `.wasm` (`application/wasm`)
3. Enable CORS if loading cross-origin

## Security Notes

- All operations run client-side
- Secret keys never leave the browser
- WASM provides memory isolation
- Use HTTPS in production
